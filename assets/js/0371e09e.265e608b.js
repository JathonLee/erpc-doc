"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[9481],{4800:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>p,frontMatter:()=>d,metadata:()=>r,toc:()=>l});const r=JSON.parse('{"id":"guide/new_redis","title":"\u65b0\u589e Redis","description":"\u81ea\u52a8\u6dfb\u52a0","source":"@site/docs/guide/06_new_redis.md","sourceDirName":"guide","slug":"/guide/new_redis","permalink":"/erpc-doc/docs/guide/new_redis","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/guide/06_new_redis.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"\u65b0\u589e DB","permalink":"/erpc-doc/docs/guide/new_db"},"next":{"title":"\u9519\u8bef\u5904\u7406","permalink":"/erpc-doc/docs/guide/error_handling"}}');var t=i(4848),s=i(8453);const d={sidebar_position:6},c="\u65b0\u589e Redis",o={},l=[{value:"\u81ea\u52a8\u6dfb\u52a0",id:"\u81ea\u52a8\u6dfb\u52a0",level:3},{value:"\u624b\u52a8\u6dfb\u52a0",id:"\u624b\u52a8\u6dfb\u52a0",level:3}];function a(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h3:"h3",header:"header",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"\u65b0\u589e-redis",children:"\u65b0\u589e Redis"})}),"\n",(0,t.jsx)(n.h3,{id:"\u81ea\u52a8\u6dfb\u52a0",children:"\u81ea\u52a8\u6dfb\u52a0"}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsx)(n.mdxAdmonitionTitle,{children:(0,t.jsx)(n.strong,{children:"\u63a8\u8350\u4f7f\u7528\u65b9\u6cd5"})}),(0,t.jsx)(n.p,{children:"erpc-cli \u5df2\u652f\u6301\u81ea\u52a8\u751f\u6210 DB,\u63a8\u8350\u4f7f\u7528\u547d\u4ee4\u5de5\u5177\u751f\u6210,\u65e0\u9700\u5173\u5fc3\u521d\u59cb\u5316\u4ee3\u7801."}),(0,t.jsx)(n.p,{children:"eg."}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"erpc comp add redis -n fooRedis\n"})}),(0,t.jsxs)(n.p,{children:["\u547d\u4ee4\u8be6\u60c5 \ud83d\udc49\ud83c\udffb ",(0,t.jsx)(n.a,{href:"/erpc-doc/docs/tools/erpc-cli#comp---%E7%BB%84%E4%BB%B6%E5%8A%9F%E8%83%BD",children:(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.em,{children:"erpc-cli-comp"})})})]})]}),"\n",(0,t.jsx)(n.h3,{id:"\u624b\u52a8\u6dfb\u52a0",children:"\u624b\u52a8\u6dfb\u52a0"}),"\n",(0,t.jsx)(n.p,{children:"\u793a\u4f8b:"}),"\n",(0,t.jsxs)(n.p,{children:["\u5728\u8be5\u76ee\u5f55\uff1a",(0,t.jsx)(n.code,{children:"{\u9879\u76ee\u6839\u76ee\u5f55}/internal/repo/dao"})," \u4e0b\u65b0\u589e ",(0,t.jsx)(n.code,{children:"{\u5b9e\u4f8b\u540d\u79f0}_redis.go"})," \u6587\u4ef6."]}),"\n",(0,t.jsx)(n.p,{children:"\u521d\u59cb\u5316\u5b8c\u9700\u8981\u5728\uff1a"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"internal/config/config.go"})," \u4e2d\u65b0\u589e\u53c2\u6570\uff1b"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"repo"})," \u4e2d\u65b0\u589e ",(0,t.jsx)(n.code,{children:"NewXxxRepo"})," \u65b9\u6cd5\u53c2\u6570\uff1b"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"cmd/server/main.go"})," \u4e2d\u65b0\u589eNewXxxDB \u521d\u59cb\u5316\u903b\u8f91\uff0c\u4f20\u5165 Repo \u53c2\u6570\uff1b"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"\u4ee3\u7801\u793a\u4f8b\uff1a"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-go",metastring:'title="material_center_redis.go"',children:'package dao\n\nimport (\n\t"fmt"\n\n\t"{\u9879\u76ee\u540d\u79f0}/internal/config"\n\t"{\u9879\u76ee\u540d\u79f0}/internal/repo/model"\n\n\t"github.com/redis/go-redis/v9"\n\teredis "talkcheap.xiaoeknow.com/erpc/erpc/contrib/redis"\n)\n\ntype MaterialCenterRedis struct {\n\tclient *redis.Client\n}\n\nfunc NewMaterialCenterRedis(cfg config.Redis) (*MaterialCenterRedis, error) {\n\tclient, err := eredis.Dial(&redis.Options{\n\t\tAddr:     fmt.Sprintf("%s:%d", cfg.Host, cfg.Port),\n\t\tPassword: cfg.Password,\n\t\tDB:       cfg.Database,\n\t})\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\treturn &MaterialCenterRedis{client: client}, nil\n}\n\nfunc (mcr *MaterialCenterRedis) Get(ctx context.Context, appID string, mid string) (model.MaterialInfo, error) {\n    // \u6267\u884c\u67e5\u8be2 redis \u64cd\u4f5c\n    // mcr.client.HGet(ctx, appID, mid)\n}\n'})})]})}function p(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>d,x:()=>c});var r=i(6540);const t={},s=r.createContext(t);function d(e){const n=r.useContext(s);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);